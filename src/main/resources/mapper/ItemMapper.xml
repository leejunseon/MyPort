<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="myport.mapper.ItemMapper">

	<insert id="addItem">
		INSERT INTO TBL_ITEM(U_NO,A_NO,I_NAME,I_PRICE,I_NUM
 		 <if test="cNo!=null and !cNo.equals('')">
			,C_NO
		</if>
		)VALUES (#{uNo},#{aNo},#{iName},#{iPrice},#{iNum}
		<if test="cNo!=null and !cNo.equals('')">
			,#{cNo}
		</if>
		)
	</insert>

	<select id="retrieveItems" resultType="myport.domain.vo.ItemVo">
		<![CDATA[
			SELECT *
			FROM TBL_ITEM
			WHERE U_NO = #{uNo}
			ORDER BY I_NO ASC
		]]>
	</select>
	
	<select id="getTotalPrice" resultType="Long">
		<![CDATA[
			SELECT SUM(I_PRICE*I_NUM)
			FROM TBL_ITEM
			WHERE U_NO = #{uNo}
		]]>
	</select>
	
	<select id="getCName" resultType="String">
		<![CDATA[
			SELECT C_NAME
			FROM TBL_COUNTRY
			WHERE C_NO = #{cNo}
		]]>
	</select>
	
	<select id="getAName" resultType="String">
		<![CDATA[
			SELECT A_NAME
			FROM TBL_ASSET
			WHERE A_NO = #{aNo}
		]]>
	</select>
	
<!-- 	<update id="modifyAssets">
		<![CDATA[
			UPDATE TBL_ASSET
			SET 
				A_NAME = #{aName},
				A_RATIO = #{aRatio},
				A_UPDATEDATE = to_char(sysdate, 'YYYY/MM/DD HH24:MI:SS')
			WHERE A_NO = #{aNo}
		]]>
	</update>
	
	<delete id="deleteAsset">
		<![CDATA[
			DELETE TBL_ASSET
			WHERE A_NO = #{aNo}
		]]>
	</delete> -->

</mapper>